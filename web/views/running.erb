<div class="row">
  <div class="small-12 medium-8 columns">
    <h1><%= @list.total %> Running Job<%= @list.total == 1 ? "" : "s" %></h1>
  </div>
  <div class="small-12 medium-4 columns">
    <%== erb :_search %>
  </div>
</div>
<div class="row">
  <div class="small-12 columns">
    <table>
      <thead>
        <tr>
          <th>Id</th>
          <th>Duration</th>
          <th>Job</th>
          <th>Queue</th>
          <th>Args</th>
        </tr>
      </thead>
      <tbody>
        <% @list.page_jobs.each do |job| %>
          <tr>
            <td>
              <a href="<%= link_to "jobs/#{job.job_id}" %>"><%= job.job_id %></a>
            </td>
            <td>
              <% if job.duration %><%= job.duration_friendly %>, <% end %>Last Update: <%== relative_time job.pg_state_changed_at %>
            </td>
            <td>
              <%= job.job_class %>
              <% if job.data['scheduler'].present? %>
                <a href="<%= link_to "schedules/#{job.data['scheduler'].try(:[], 'name')}" %>">
                  <div style="font-size: 80%"><%= job.data['scheduler'].try(:[], 'name') %></div>
                </a>
              <% end %>
            </td>
            <td>
              <%= job.queue %>
            </td>
            <td>
              <pre><%= job.args.map(&:inspect).join(', ') %></pre>
            </td>
          </tr>
        <% end %>
      </tbody>
    </table>
  </div>
</div>
